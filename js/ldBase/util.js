function import$(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}var x$,slice$=[].slice;x$=angular.module("ldBase"),x$.filter("nicedate",function(){return function(e){var t;return t=new Date(e),t.getYear()+1900+"/"+(t.getMonth()+1)+"/"+t.getDate()}}),x$.filter("nicedatetime",function(){return function(e){var t,n,r,i,o,a,l,u;return t=function(e){return(10>e?"0":"")+""+e},n=new Date(e),r=n.getYear()+1900,i=t(n.getMonth()+1),o=t(n.getDate()),a=t(n.getHours()),l=t(n.getMinutes()),u=t(n.getSeconds()),r+"/"+i+"/"+o+" "+a+":"+l+":"+u}}),x$.service("gautil",["$rootScope"].concat(function(){return{track:function(e,t,n,r){return"undefined"!=typeof ga&&null!==ga?ga("send","event",e,t,n,r):void 0}}})),x$.service("initWrap",["$rootScope"].concat(function(){var e;return e=function(){var e;return e=function(t){return(e.list||(e.list=[])).push(t),import$(t,{promise:{},failed:function(e){var t,n;return null==e&&(e="default"),t=slice$.call(arguments,1),this.promise[e]?(n=this.promise[e].rej,this.promise[e]=null,n.apply(null,t)):void 0},finish:function(e){var t,n;return null==e&&(e="default"),t=slice$.call(arguments,1),this.promise[e]?(n=this.promise[e].res,this.promise[e]=null,n.apply(null,t)):void 0},block:function(e){var t=this;return null==e&&(e="default"),new Promise(function(n,r){return t.promise[e]={res:n,rej:r}})}})},e.run=function(){return(this.list||(this.list=[])).map(function(e){return e.init()})},e}})),x$.directive("ngModal",["$compile","$timeout"].concat(function(e,t){return{restrict:"A",scope:{model:"=ngModel",config:"=config"},link:function(e,n){var r,i;return r=e.config||{},e.model.ctrl=i={promise:null,focus:function(){return t(function(){var e;return e=n.find("input[tabindex='1']"),e.length?e.focus():void 0},0)},toggle:function(t,n){return n&&(this.value=n),null!=t&&!!this.toggled==!!t||(this.toggled=null!=t?t:!this.toggled,this.toggled&&this.focus(),this.toggled||!i.promise)?void 0:e.model.action("done")},toggled:null,value:null,reset:function(){return this.value=""},init:function(){return this.reset(),n.on("keydown",function(t){var i,o,a;return i=t.keyCode||t.which,13===i?(o=+t.target.getAttribute("tabindex")+1,a=n.find("input[tabindex='"+o+"']"),a&&a.length?a[0].focus():(r.dismissOnEnter&&e.$apply(function(){return e.model.action("done")}),null!=r.finish?r.finish():void 0)):void 0})}},e.model.action=function(t){return"done"===t&&(e.model.value=i.value),i.toggle(!1),i.promise?("done"===t?i.promise.res(i.value):i.promise.rej(t),i.promise=null):void 0},e.model.prompt=function(e){return i.toggle(!0,e),new Promise(function(e,t){return i.promise={res:e,rej:t}})},e.model.ctrl.init()}}})),x$.directive("ngIonSlider",["$compile"].concat(function(){return{restrict:"A",scope:{model:"=ngValue",config:"=config","switch":"=ngSwitch"},link:function(e,t,n){var r;return t[0].addEventListener("keyup",function(){return t[0].value!==e.model?e.$apply(function(){return e.model=t[0].value||0}):void 0}),t[0].addEventListener("change",function(){return t[0].value!==e.model?e.$apply(function(){return e.model=t[0].value||0}):void 0}),null!=n.ngSwitch&&null==e["switch"]&&(e["switch"]=null!=n.defaultSwitch?n.defaultSwitch===!0:!0),e.$watch("model",function(e){return t[0].value=e||0}),r=!1,e.$watch("switch",function(i){var o,a,l;return n.ngSwitch||(i=null!=n.defaultSwitch?"true"===n.defaultSwitch:!0),i&&!r&&(r=!0,o=e.config||{},a="double"===o.type,a&&!Array.isArray(e.model)&&(e.model=[0,100]),e.$watch("config",function(e){return l.update(e)}),e.$watch("model",function(e){if(a){if(l.result.from!==e[0]&&l.update({from:e[0]}),l.result.to!==e[1])return l.update({to:e[1]})}else if(l.result.from!==+e)return l.update({from:e})}),$(t).ionRangeSlider(import$(import$({},o),{onChange:function(t){return e.$apply(function(){if(a){if(e.model[0]!==t.from&&(e.model[0]=t.from),e.model[1]!==t.to)return e.model[1]=t.to}else if(e.model!==t.from)return e.model=t.from})}})),l=$(t).data("ionRangeSlider")),i?(t.addClass("irs-hidden-input"),t.attr("readonly",!0),t.parent().removeClass("input")):(t.removeClass("irs-hidden-input"),t.removeAttr("readonly"),t.parent().addClass("input"))})}}})),x$.directive("readby",["$compile"].concat(function(){return{scope:{readby:"&readby",encoding:"@encoding",askencoding:"&askencoding",multiple:"@multiple"},link:function(e,t,n){var r,i;return r=e.readby(),i=e.askencoding(),t.bind("change",function(o){var a;return a=function(){var i,a,l,u;return i=o.target.files,i.length?n.multiple?(a=function(t){return new Promise(function(r){var i;return i=new FileReader,i.onload=function(){return r({result:i.result,file:t})},n.asdataurl?i.readAsDataURL(t):e.encoding?i.readAsText(t,e.encoding):i.readAsBinaryString(t)})},l=Array.from(i).map(function(e){return a(e)}),Promise.all(l).then(function(n){return e.$apply(function(){return r(n)}),t.val("")})):(u=new FileReader,u.onload=function(){return e.$apply(function(){return r(u.result,i[0])}),t.val("")},null!=n.asdataurl?u.readAsDataURL(i[0]):null!=n.asarraybuffer?u.readAsArrayBuffer(i[0]):e.encoding?u.readAsText(i[0],e.encoding):u.readAsBinaryString(i[0])):void 0},e.$apply(function(){return i?i(a):a()})})}}})),x$.directive("ngGradient",["$compile"].concat(function(){return{restrict:"A",scope:{model:"=ngValue",config:"=config"},link:function(e,t){var n,r,i,o,a,l;return e.idx=null,n=t[0].querySelector(".ldColorPicker"),r=new ldColorPicker(null,{"class":"text-input no-palette flat"}),n=r.node,n.style.display="none",i=!1,o=!1,a=!0,l=function(){return e.model?(e.gradient=["linear-gradient(90deg,",e.model.colors.map(function(e){return e.value+" "+100*e.pos+"%"}).join(","),")"].join(""),t[0].querySelector(".gradient-inner").style.background=e.gradient):void 0},e.$watch("model",function(){return l()}),r.on("change",function(t){return e.$apply(function(){return null!=e.idx&&e.model?(e.model.colors[e.idx].value=t,l()):void 0})}),t[0].addEventListener("mouseup",function(l){return e.$apply(function(){var u,d,c;return a=!0,o&&!i&&null!=e.idx?(u=l.target.getBoundingClientRect(),d=t[0].getBoundingClientRect(),(c=e.lastidx!==e.idx||"block"!==n.style.display)&&setTimeout(function(){return r.toggle(c)},0),n.style.top=u.bottom+15+document.body.scrollTop+"px",n.style.left=u.left-15+document.body.scrollLeft+"px",l.stopPropagation(),l.preventDefault()):void 0})}),t[0].addEventListener("click",function(n){return e.$apply(function(){var o,a;if(!(i||n.target!==t[0]&&n.target!==t[0].querySelector(".gradient-inner")))return o=t[0].getBoundingClientRect(),a=(n.clientX-o.left)/o.width,1>=a||(a=1),a>=0||(a=0),e.model?(e.model.colors.push({value:"#000000",pos:a}),e.model.colors.sort(function(e,t){return e.pos-t.pos}),l(),r.toggle(!1)):void 0})}),window.addEventListener("mousedown",function(n){return e.$apply(function(){return i=!1,o=!1,n.target.parentNode===t[0]?(a=!1,e.lastidx=e.idx,e.idx=Array.from(n.target.parentNode.childNodes).filter(function(e){return e.getAttribute&&/tick/.exec(e.getAttribute("class"))}).indexOf(n.target),e.idx<0?e.idx=null:(o=!0,n.preventDefault(),n.stopPropagation())):void 0})}),window.addEventListener("mousemove",function(n){return e.$apply(function(){var o,u,d,c;if(i=!0,o=t[0].getBoundingClientRect(),u=(n.clientX-o.left)/o.width,1>=u||(u=1),u>=0||(u=0),d=Math.abs(n.clientY-(o.top+o.height/2)),c=n.buttons||n.button,!a&&c&&null!=e.idx){if(r.toggle(!1),d>o.height/2+60)return e.model&&e.model.colors.splice(e.idx,1),e.idx=null,l();if(e.model)return e.idx>0&&e.model.colors[e.idx-1].pos>u&&(u=e.model.colors[e.idx-1].pos),e.idx<e.model.colors.length-1&&e.model.colors[e.idx+1].pos<u&&(u=e.model.colors[e.idx+1].pos),e.model.colors[e.idx].pos=u,l()}})}),l()}}})),x$.directive("ngClipboard",["$compile"].concat(function(){return{restrict:"A",scope:{},link:function(e,t,n){var r,i;return r=new Clipboard(t[0],{target:function(){return document.querySelector(n.target)}}),i=document.createElement("div"),i.setAttribute("class","hover-tip "+(n.dir||"top")),t[0].appendChild(i),r.on("success",function(){return t.addClass("copied"),i.innerText="copied",setTimeout(function(){return t.removeClass("copied")},1e3)}),r.on("error",function(){return t.addClass("copied"),i.innerText="Press Ctrl+C to Copy",setTimeout(function(){return t.removeClass("copied")},1e3)})}}})),x$.directive("ngDrop",["$compile"].concat(function(){return{restrict:"A",scope:{swap:"&swap"},link:function(e,t,n){var r,i;return n.swap&&(r=e.swap()),i=function(e){return e.getAttribute("draggable")?e:e.parentNode},t[0].addEventListener("dragenter",function(e){return e.preventDefault()}),t[0].addEventListener("dragover",function(e){return e.preventDefault(),e.dataTransfer.dropEffect="move"}),t[0].addEventListener("dragstart",function(e){var t,n;return t=i(e.target),n=Array.from(t.parentNode.querySelectorAll("*[draggable=true]")).indexOf(t),e.dataTransfer.setData("text/plain",n)}),t[0].addEventListener("drop",function(e){var t,n,o;return t=i(e.target),n=+e.dataTransfer.getData("text"),o=Array.from(t.parentNode.querySelectorAll("*[draggable=true]")).indexOf(t),n>=0&&o>=0&&r?r(n,o):void 0})}}})),x$.directive("ngPaypal",["$compile","global","$timeout","gautil"].concat(function(e,t,n,r){return{restrict:"A",scope:{model:"=ngModel",trackid:"@trackid",type:"@type",id:"@itemid",price:"@price",format:"@format"},link:function(e,i){var o,a,l;return o=document.createElement("div"),o.id="paypal-btn-"+Math.random().toString().substring(2),o.setAttribute("class","paypal-btn-inner"),a=document.createElement("div"),a.id="paypal-btn-"+Math.random().toString().substring(2)+"-loader",a.setAttribute("class","ld ld-ball ld-flip"),i[0].appendChild(o),i[0].appendChild(a),i.addClass("ld ld-over-inverse running"),e.paid=!1,e.$watch("model.list",function(t,n){var r;if(t!==n&&t&&t.length)return r=t.filter(function(t){return t.type===e.type&&t.item===e.id}).length,r?i.addClass("paid"):i.removeClass("paid"),e.paid=r?!0:!1},!0),i.on("click",function(){return e.paid?e.model.paid({trackid:e.trackid,id:e.id,type:e.type,price:e.price,format:e.format}):void 0}),l={init:function(){return this.inited?void 0:"undefined"==typeof paypal||null===paypal?n(function(){return l.init()},1e3):(this.inited=!0,paypal.Button.render({env:t.production?"production":"sandbox",style:{size:"responsive"},payment:function(n,i){return r.track(e.trackid,"pay-button","click"),paypal.request.post("/d/create-payment/",{type:e.type,id:e.id},{headers:{"X-CSRF-Token":t.csrfToken}}).then(function(e){return n(e.paymentID)})["catch"](function(e){return i(e)})},onAuthorize:function(n){var i;return paypal.request.post("/d/execute-payment/",(i={paymentID:n.paymentID,payerID:n.payerID},i.type=e.type,i.id=e.id,i),{headers:{"X-CSRF-Token":t.csrfToken}}).then(function(){return e.$apply(function(){return null!=e.model.paid?e.model.paid({trackid:e.trackid,id:e.id,type:e.type,price:e.price,format:e.format}):void 0}),r.track(e.trackid,"paid",e.format||"",1.99),null})["catch"](function(e){return console.log(e),alert("Something wrong in the payment process. please try again.")})}},o.id).then(function(){return i.removeClass("running")}))}},l.init()}}}));